# Chapter 29 : ConstraintLayout 원리

## ConstraintLayout 동작 원리

### 제약

- 컴포저블의 정렬과 위치를 상대적으로 조정하는 규칙
- 기기 방향의 변경, 다른 화면 크기에 반응하는 등의 상황에 대한 대응방법 지정

### 마진

- 고정된 거리의 여백을 지정
- 고정값을 사용하기 때문에 기기 회전, 다양한 화면에 표시 등에는 덜 유연함 → 응답성을 지니려면 반대 제약 구현 추천


### 반대 제약

- 동일한 축을 따라 한 컴포저블이 가진 2개의 제약
- 특정한 축에 대해 반대 제약이 구현되면 좌표 기반이 아닌 비율로 위치를 정의함

### 제약 편향

- 제약 조건에 대해 지정된 백분율만큼 치우치도록 할 수 있다

### 체인

- 2개 이상 컴포저블을 포함하는 레이아웃의 동작 방법 제공
- 수평축, 수직축 기준으로 선언
- 체인 안에 있는 컴포넌트들의 간격과 크기 정의
- 체인 헤드 : 체인 기준 왼쪽 위의 기준 컴포넌트

### 체인 스타일

- Spread Chain / Spread Inside Chain / Weighted Chain / Packed Chain

### 크기 설정

5개 옵션 제공: 
1. Dimension.preferredWrapContent
2. Dimension.wrapContent
3. Dimension.fillToConstraints
4. Dimension.preferredValue
5. Dimension.value

### 가이드라인 헬퍼

- 추가적으로 연결될 수 있는 제약 제공
- 여러 가이드라인 추가 가능
- 여러 요소를 축에 맞춰 정렬할 때 유용

### 배리어 헬퍼

- 가상의 뷰로 컴포저블들을 레이아웃 안에 표시되도록 제한
- 배리어에 따라 그룹화된 레퍼런스 컴포넌트 요소들 중 기준 컴포넌트인 제약 컴포넌트에 맞춰 배리어 위치 조정

# Chapter 30 : ConstraintLayout 다루기

- 기본으로 포함되지 않아서 라이브러리 설정 추가 필요

~~~
dependencies {
    implementation 'androidx.constraintlayout:constraintlayout-compose:1.0.1'
}
~~~

- 다른 컴포저블과 동일한 형태로 제공됨
- 제약을 받을 컴포저블은 참조를 먼저 할당해야 한다. → 참조를 개별 컴포저블에 적용
- linkTo(참조), center...To(참조), centerAround(참조) 등으로 제약을 추가한다

~~~
@Composable
fun ConstraintLayoutEx1() {
    ConstraintLayout(Modifier
        .size(200.dp, 200.dp)
        .background(Color.Green)) {
        val text1 = createRef()

        val (button1, text2, text3) = createRefs()

        Text(text = "text1", Modifier.constrainAs(text1) {
            top.linkTo(parent.top)
            bottom.linkTo(parent.bottom, margin = 16.dp)
        })

        Text(text = "text2", Modifier.constrainAs(text2) {
            linkTo(parent.start, parent.end, bias = 0.8f)
            linkTo(text1.top, text1.bottom)
        })

        Text(text = "text3", Modifier.constrainAs(text3) {
            centerVerticallyTo(text1)
            centerHorizontallyTo(parent)
        })

        Button(onClick = { /*TODO*/ }, Modifier.constrainAs(button1) {
            centerAround(text3.end)
        }) {

        }
    }
}
~~~
