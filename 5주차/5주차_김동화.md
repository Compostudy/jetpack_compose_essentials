# Chapter 39 : Canvas

- Canvas: 2D 그래픽을 그릴 수 있는 표면 제공, 컨텐츠 상태 자동 유지 및 관리

## 선 그리기

~~~
@Composable
fun DrawLine() {
    Canvas(
        modifier = Modifier.size(300.dp)
    ) {
        val height = size.height
        val width = size.width

        drawLine(
            start = Offset(0f, 0f),
            end = Offset(height, width),
            color = Color.Blue,
            strokeWidth = 10.0f
        )
    }
}
~~~

## 점선 그리기

- PathEffect 인스턴스의 dashPathEffect 호출
- 짝수 단위의 '그리는 구간', '그리지 않는 구간' 순서대로 

~~~
@Composable
fun DrawLine() {
    Canvas(
        modifier = Modifier.size(300.dp)
    ) {
        val height = size.height
        val width = size.width

        drawLine(
            start = Offset(0f, 0f),
            end = Offset(height, width),
            color = Color.Blue,
            strokeWidth = 10.0f,
            pathEffect = PathEffect.dashPathEffect(
                floatArrayOf(30f, 10f, 10f, 10f), phase = 0f
            )
        )
    }
}
~~~

## 사각형 그리기

- px, dp 단위 헷갈리지 않게 조정 , Offset은 px 단위 사용
- topLeft 를 통해 시작지점 지정
- inset을 통해 컴포넌트 경계 수정
- drawRoundRect를 통해 둥근 모서리 사각형 생성
- rotate를 통해 회전

~~~
@Composable
fun DrawRect() {
    Canvas(modifier = Modifier.size(300.dp)) {
//        val size = Size(200.dp.toPx(), 100.dp.toPx())
        //inset(100f, 200f) {
        rotate(45f) {
            drawRect(
                color = Color.Blue,
                size = size / 2f,
                topLeft = Offset(
                    x = (size.width / 4),
                    y = (size.width / 4)
                )
            )
        }

        drawRoundRect(
            color = Color.Blue,
            size = size / 2f,
            style = Stroke(width = 10.dp.toPx()),
            cornerRadius = CornerRadius(
                30.dp.toPx()
            )
        )
        //}
    }
}
~~~

## 원과 타원

~~~
@Composable
fun DrawCircle() {
    Canvas(modifier = Modifier.size(300.dp)) {

//        drawCircle(
//            color = Color.Blue,
//            radius = 60.dp.toPx()
//        )

        drawOval(
            color = Color.Blue,
            size = Size(
                size.width - 50.dp.toPx(),
                size.height / 2
            ),
            style = Stroke(5.dp.toPx()),
            topLeft = Offset(25.dp.toPx(), 25.dp.toPx())
        )
    }
}
~~~

## 그레이디언트 그리기

- Brush 컴포넌트를 이용

~~~
@Composable
fun GradientFillRect() {

    Canvas(modifier = Modifier.size(300.dp)) {

        val colorList = listOf(
            Color.Red,
            Color.Blue,
            Color.Magenta,
            Color.Yellow,
            Color.Green,
            Color.Cyan
        )

        val brush = Brush.horizontalGradient(
            colors = colorList,
            startX = 0f,
            endX = size.width,
            tileMode = TileMode.Repeated
        )

        drawRect(
            brush = brush,
            size = size
        )
    }
}

@Composable
fun GradientFillCircle() {

    Canvas(modifier = Modifier.size(300.dp)) {

        val colorList = listOf(
            Color.Red,
            Color.Blue,
            Color.Magenta,
            Color.Yellow,
            Color.Green,
            Color.Cyan
        )

        val brush = Brush.radialGradient(
            colors = colorList,
            center = center,
            radius = 150.dp.toPx(),
            tileMode = TileMode.Repeated
        )

        drawCircle(
            brush = brush,
            center = center,
            radius = 150.dp.toPx()
        )
    }
}

// 
        val brush = Brush.horizontalGradient(
            colors = colorList,
            startX = 0f,
            endX = 300.dp.toPx(),
            tileMode = TileMode.Repeated
        )
~~~

## 부채꼴 그리기

~~~
@Composable
fun DrawArc() {

    Canvas(modifier = Modifier.size(300.dp)) {
        drawArc(
            Color.Blue,
            startAngle = 20f,
            sweepAngle = 90f,
            useCenter = true,
            size = Size(100.dp.toPx(), 120.dp.toPx())
        )
    }
}
~~~

## 경로 그리기

- moveTo() 함수로 첫 번째 선의 시작 , lineTo() relativeLineTo()로 다음 위치 선언
- Bezier 함수로 곡선 구현

~~~
@Composable
fun DrawPath() {
    Canvas(modifier = Modifier.size(300.dp)) {

        val path = Path().apply {
            moveTo(0f, 0f)
            quadraticBezierTo(
                50.dp.toPx(), 200.dp.toPx(),
                300.dp.toPx(), 300.dp.toPx()
            )
            lineTo(270.dp.toPx(), 100.dp.toPx())
            quadraticBezierTo(60.dp.toPx(), 80.dp.toPx(), 0f, 0f)
            close()
        }

        drawPath(
            path = path,
            color = Color.Blue
        )
    }
}
~~~

## 점 그리기

~~~
@Composable
fun DrawPoints() {
    Canvas(Modifier.size(300.dp)) {

        val points = mutableListOf<Offset>()

        for (x in 0..size.width.toInt()) {
            val y = (sin(x * (2f * PI / size.width)) *
                    (size.height / 2) * (size.height / 2)).toFloat()

            points.add(Offset(x.toFloat(), y))

            drawPoints(
                points = points,
                strokeWidth = 3f,
                pointMode = PointMode.Points,
                color = Color.Blue
            )
        }
    }
}
~~~

## 이미지 그리기

- 나중에 추가적으로 ColorFilter를 이용해 색조, 광량, 색상 매트릭스, 혼합 설정 등 적용 가능

~~~
@Composable
fun DrawImage() {
    val image = ImageBitmap.imageResource(id = R.drawable.ic_launcher_foreground)

    Canvas(modifier = Modifier.size(300.dp)) {
        drawImage(
            image = image
        )
    }
}
~~~
